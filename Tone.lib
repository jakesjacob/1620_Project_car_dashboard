http://mbed.org/users/eencae/code/Tone/#836cdf67dbdb
